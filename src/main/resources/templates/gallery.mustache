<h1>victory 파일 업로드</h1> <hr>

<form action="/gallery" method="post" enctype="multipart/form-data">
    제목 : <input type="text" name="title"> <br>
    파일 : <input type="file" name="file"> <br>
    <button>등록하기</button>
</form>

<hr>


<h1>
    jojoldu S3 이미지 업로더
</h1>
<div class="col-md-12">
    <div class="col-md-2">
        <form>
            <div class="form-group">
                <label for="img">파일 업로드</label>
                <input type="file" id="img">
            </div>
            <button type="button" class="btn btn-primary" id="btn-save">저장</button>
        </form>
    </div>
    <div class="col-md-10">
        <p><strong>결과 이미지입니다.</strong></p>
        <img src="" id="result-image">
    </div>
</div>


<script>
    $('#btn-save').on('click', uploadImage);

    function uploadImage() {
        var file = $('#img')[0].files[0];
        var formData = new FormData();
        formData.append('data', file);

        $.ajax({
            type: 'POST',
            url: '/gallery',
            data: formData,
            processData: false,
            contentType: false
        }).done(function (data) {
            $('#result-image').attr("src", data);
        }).fail(function (error) {
            alert(error);
        })
    }
</script>



<!--<div th:each="gallery : ${galleryList}">-->
<!--    <div style="margin-bottom: 30px">-->
<!--        <p th:inline="text">제목 : [[${gallery.title}]]</p>-->
<!--        <img th:src="${gallery.imgFullPath}" style="width: 500px; height: 300px;">-->
<!--    </div>-->

<!--    <form th:action="@{/gallery}" method="post" enctype="multipart/form-data">-->
<!--        <input type="hidden" name="id" th:value="${gallery.id}">-->
<!--        <input type="hidden" name="title" th:value="${gallery.title}">-->
<!--        <input type="hidden" name="filePath" th:value="${gallery.filePath}">-->
<!--        파일 : <input type="file" name="file"> <br>-->
<!--        <button>수정하기</button>-->
<!--    </form>-->
<!--    <hr>-->
<!--</div>-->
